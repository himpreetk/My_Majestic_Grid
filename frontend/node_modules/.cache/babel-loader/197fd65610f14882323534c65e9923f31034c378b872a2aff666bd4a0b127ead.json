{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){const[brands,setBrands]=useState([]);const[newBrand,setNewBrand]=useState('');const navigate=useNavigate();const fetchBrands=async()=>{const res=await axios.get('http://localhost:5000/api/brands');setBrands(res.data);};useEffect(()=>{fetchBrands();},[]);const handleAdd=async()=>{if(!newBrand.trim())return alert('⚠️ Brand name required');const brandNameRegex=/^[a-zA-Z0-9\\s]{2,30}$/;if(!brandNameRegex.test(newBrand)){return alert('❌ Invalid brand name. Use only letters, numbers and space (2-30 chars)');}try{await axios.post('http://localhost:5000/api/brands',{name:newBrand});setNewBrand('');fetchBrands();}catch(err){var _err$response,_err$response$data;const message=(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message;alert(message||'❌ Failed to add brand');}};const handleDelete=async id=>{await axios.delete(`http://localhost:5000/api/brands/${id}`);fetchBrands();};const handleUpdate=async(id,currentName)=>{const updated=prompt('Update brand name:',currentName);if(updated){await axios.put(`http://localhost:5000/api/brands/${id}`,{name:updated});fetchBrands();}};const handleLogout=()=>{localStorage.removeItem('token');alert('Logout successful');navigate('/');};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'2rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Global Majestic Car Brands\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,style:{padding:'0.5rem 1rem',background:'#f44336',color:'#fff',border:'none',borderRadius:'5px'},children:\"Logout\"})]}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"New brand name\",value:newBrand,onChange:e=>setNewBrand(e.target.value),style:{marginRight:'1rem',marginTop:'1rem'}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAdd,children:\"Add Brand\"}),brands.length>=5&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red',marginTop:'1rem'},children:\"\\uD83D\\uDEAB Brand limit reached (5)\"}),/*#__PURE__*/_jsx(\"ul\",{style:{marginTop:'2rem'},children:brands.map(brand=>/*#__PURE__*/_jsxs(\"li\",{children:[brand.name,/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleUpdate(brand._id,brand.name),style:{marginLeft:'1rem'},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(brand._id),style:{marginLeft:'0.5rem'},children:\"Delete\"})]},brand._id))})]});}export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Dashboard","brands","setBrands","newBrand","setNewBrand","navigate","fetchBrands","res","get","data","handleAdd","trim","alert","brandNameRegex","test","post","name","err","_err$response","_err$response$data","message","response","handleDelete","id","delete","handleUpdate","currentName","updated","prompt","put","handleLogout","localStorage","removeItem","style","padding","children","display","justifyContent","alignItems","onClick","background","color","border","borderRadius","placeholder","value","onChange","e","target","marginRight","marginTop","length","map","brand","_id","marginLeft"],"sources":["C:/Users/raman/majestic_grid/frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Dashboard() {\r\n  const [brands, setBrands] = useState([]);\r\n  const [newBrand, setNewBrand] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const fetchBrands = async () => {\r\n    const res = await axios.get('http://localhost:5000/api/brands');\r\n    setBrands(res.data);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchBrands();\r\n  }, []);\r\n\r\n  const handleAdd = async () => {\r\n    if (!newBrand.trim()) return alert('⚠️ Brand name required');\r\n\r\n    const brandNameRegex = /^[a-zA-Z0-9\\s]{2,30}$/;\r\n    if (!brandNameRegex.test(newBrand)) {\r\n      return alert('❌ Invalid brand name. Use only letters, numbers and space (2-30 chars)');\r\n    }\r\n\r\n    try {\r\n      await axios.post('http://localhost:5000/api/brands', { name: newBrand });\r\n      setNewBrand('');\r\n      fetchBrands();\r\n    } catch (err) {\r\n      const message = err.response?.data?.message;\r\n      alert(message || '❌ Failed to add brand');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    await axios.delete(`http://localhost:5000/api/brands/${id}`);\r\n    fetchBrands();\r\n  };\r\n\r\n  const handleUpdate = async (id, currentName) => {\r\n    const updated = prompt('Update brand name:', currentName);\r\n    if (updated) {\r\n      await axios.put(`http://localhost:5000/api/brands/${id}`, { name: updated });\r\n      fetchBrands();\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    alert('Logout successful');\r\n    navigate('/');\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '2rem' }}>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n        <h2>Global Majestic Car Brands</h2>\r\n        <button onClick={handleLogout} style={{ padding: '0.5rem 1rem', background: '#f44336', color: '#fff', border: 'none', borderRadius: '5px' }}>\r\n          Logout\r\n        </button>\r\n      </div>\r\n\r\n      <input\r\n        placeholder=\"New brand name\"\r\n        value={newBrand}\r\n        onChange={e => setNewBrand(e.target.value)}\r\n        style={{ marginRight: '1rem', marginTop: '1rem' }}\r\n      />\r\n      <button onClick={handleAdd}>Add Brand</button>\r\n\r\n      {brands.length >= 5 && <p style={{ color: 'red', marginTop: '1rem' }}>🚫 Brand limit reached (5)</p>}\r\n\r\n      <ul style={{ marginTop: '2rem' }}>\r\n        {brands.map(brand => (\r\n          <li key={brand._id}>\r\n            {brand.name}\r\n            <button onClick={() => handleUpdate(brand._id, brand.name)} style={{ marginLeft: '1rem' }}>Edit</button>\r\n            <button onClick={() => handleDelete(brand._id)} style={{ marginLeft: '0.5rem' }}>Delete</button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}